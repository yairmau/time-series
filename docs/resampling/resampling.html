<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Time Series Analysis - 6&nbsp; resampling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../resampling/upsampling.html" rel="next">
<link href="../resampling/motivation.html" rel="prev">
<link href="../archive/clock-history.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/iconify-1.0.7/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">resampling</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../archive/clock-history.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Time Series Analysis</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://yairmau.com/" title="" class="sidebar-tool px-1"><i class="bi bi-house-fill"></i></a>
    <a href="../references.html" title="" class="sidebar-tool px-1"><i class="bi bi-bookmark-fill"></i></a>
    <a href="../things-to-remember.html" title="" class="sidebar-tool px-1"><i class="bi bi-asterisk"></i></a>
    <a href="https://github.com/yairmau/time-series/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">about</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../who-cares.html" class="sidebar-item-text sidebar-link">who cares?</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">start here</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/boring.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">the boring stuff you absolutely need to do</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/numpy-pandas-matplotlib.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">numpy, pandas, matplotlib</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/example.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">learn by example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/AI-policy.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">AI policy</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">resampling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resampling/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resampling/resampling.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">resampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resampling/upsampling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">upsampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resampling/interpolation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">interpolation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resampling/FAQ.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">FAQ</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">smoothing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../smoothing/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../smoothing/sliding.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">sliding window</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../smoothing/LOESS.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">LOESS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../smoothing/perfect-smoother.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">a perfect smoother</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">outliers and gaps</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../outliers/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../outliers/zscore.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Z-score</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../outliers/IQR.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">IQR (Inter Quartile Range)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">best practices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../best-practices/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../best-practices/date-formatting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">date formatting</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">stationarity</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stationarity/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stationarity/stochastic.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">stochastic processes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stationarity/autocorrelation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">autocorrelation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">time lags</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lags/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lags/cross-correlation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">cross-correlation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lags/dynamic-time-warp.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">dynamic time warp</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lags/LDTW.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">LDTW</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">frequency</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../frequency/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../frequency/fourier.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Fourier transform</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../frequency/filtering.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">filtering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../frequency/nyquist.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Nyquist-Shannon sampling theorem</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">seasonality</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../seasonality/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../seasonality/seasonal-decomposition.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">seasonal decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../seasonality/hilbert.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Hilbert transform</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">rates of change</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rates-of-change/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rates-of-change/derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rates-of-change/finite-differences.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">finite differences</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rates-of-change/fourier-based-derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Fourier-based derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rates-of-change/LOESS-based-derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">LOESS-based derivatives</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">forecasting</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../forecasting/motivation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../forecasting/arima.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">ARIMA</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">assignments</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/assignment1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/assignment2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">assignment 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/assignment_final.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">final assignment</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../technical-stuff/technical-stuff.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">technical stuff</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true">behind-the-scenes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../behind-the-scenes/sliding-window-video.html" class="sidebar-item-text sidebar-link">sliding window video</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../behind-the-scenes/API-IMS.html" class="sidebar-item-text sidebar-link">API to download data from IMS</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">resampling</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source" data-quarto-source-url="https://github.com/yairmau/time-series/blob/main/resampling/resampling.ipynb"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>We can only really understand how to calculate monthly means if we do it ourselves.</p>
<p>First, let’s import a bunch of packages we need to use.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">from</span> matplotlib.dates <span class="im">import</span> DateFormatter</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> ticker</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="im">import</span> warnings</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Suppress FutureWarnings</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>warnings.simplefilter(action<span class="op">=</span><span class="st">'ignore'</span>, category<span class="op">=</span><span class="pp">FutureWarning</span>)</span>
<span id="cb1-10"><a href="#cb1-10"></a>warnings.simplefilter(action<span class="op">=</span><span class="st">'ignore'</span>, category<span class="op">=</span><span class="pp">UserWarning</span>)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-12"><a href="#cb1-12"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"ticks"</span>, font_scale<span class="op">=</span><span class="fl">1.5</span>)  <span class="co"># white graphs, with large and legible letters</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we load the csv file for Jerusalem (2019), provided by the <a href="https://ims.gov.il/en/data_gov" target="_blank">IMS</a>.</p>
<section id="discussion" class="level5 unnumbered alert alert-info">
<h5 class="unnumbered anchored" data-anchor-id="discussion">discussion</h5>
We will go to the IMS website together and see what are the options available and how to download. If you just need the csv right away, download it <a href="../archive/data/jerusalem2019.csv" download="">here</a>.
</section>
<ul>
<li>We substitute every occurence of <code>-</code> for NaN (not a number, that is, the data is missing).</li>
<li>We call the columns <code>Temperature (°C)</code> and <code>Rainfall (mm)</code> with more convenient names, since we will be using them a lot.</li>
<li>We interpret the column <code>Date &amp; Time (Winter)</code> as a date, saying to python that day comes first.</li>
<li>We make <code>date</code> the index of the dataframe.</li>
</ul>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>filename <span class="op">=</span> <span class="st">"../archive/data/jerusalem2019.csv"</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>df <span class="op">=</span> pd.read_csv(filename, na_values<span class="op">=</span>[<span class="st">'-'</span>])</span>
<span id="cb2-3"><a href="#cb2-3"></a>df.rename(columns<span class="op">=</span>{<span class="st">'Temperature (°C)'</span>: <span class="st">'temperature'</span>,</span>
<span id="cb2-4"><a href="#cb2-4"></a>                   <span class="st">'Rainfall (mm)'</span>: <span class="st">'rain'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-5"><a href="#cb2-5"></a>df[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'Date &amp; Time (Winter)'</span>], dayfirst<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-6"><a href="#cb2-6"></a>df <span class="op">=</span> df.set_index(<span class="st">'date'</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Station</th>
      <th>Date &amp; Time (Winter)</th>
      <th>Diffused radiation (W/m^2)</th>
      <th>Global radiation (W/m^2)</th>
      <th>Direct radiation (W/m^2)</th>
      <th>Relative humidity (%)</th>
      <th>temperature</th>
      <th>Maximum temperature (°C)</th>
      <th>Minimum temperature (°C)</th>
      <th>Wind direction (°)</th>
      <th>Gust wind direction (°)</th>
      <th>Wind speed (m/s)</th>
      <th>Maximum 1 minute wind speed (m/s)</th>
      <th>Maximum 10 minutes wind speed (m/s)</th>
      <th>Time ending maximum 10 minutes wind speed (hhmm)</th>
      <th>Gust wind speed (m/s)</th>
      <th>Standard deviation wind direction (°)</th>
      <th>rain</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>01/01/2019 00:00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>80.0</td>
      <td>8.7</td>
      <td>8.8</td>
      <td>8.6</td>
      <td>75.0</td>
      <td>84.0</td>
      <td>3.3</td>
      <td>4.3</td>
      <td>3.5</td>
      <td>23:58</td>
      <td>6.0</td>
      <td>15.6</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-01-01 00:10:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>01/01/2019 00:10</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79.0</td>
      <td>8.7</td>
      <td>8.8</td>
      <td>8.7</td>
      <td>74.0</td>
      <td>82.0</td>
      <td>3.3</td>
      <td>4.1</td>
      <td>3.3</td>
      <td>00:01</td>
      <td>4.9</td>
      <td>14.3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-01-01 00:20:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>01/01/2019 00:20</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79.0</td>
      <td>8.7</td>
      <td>8.8</td>
      <td>8.7</td>
      <td>76.0</td>
      <td>82.0</td>
      <td>3.2</td>
      <td>4.1</td>
      <td>3.3</td>
      <td>00:19</td>
      <td>4.9</td>
      <td>9.9</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>01/01/2019 00:30</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79.0</td>
      <td>8.7</td>
      <td>8.7</td>
      <td>8.6</td>
      <td>78.0</td>
      <td>73.0</td>
      <td>3.6</td>
      <td>4.2</td>
      <td>3.6</td>
      <td>00:30</td>
      <td>5.2</td>
      <td>11.7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-01-01 00:40:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>01/01/2019 00:40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79.0</td>
      <td>8.6</td>
      <td>8.7</td>
      <td>8.5</td>
      <td>80.0</td>
      <td>74.0</td>
      <td>3.6</td>
      <td>4.4</td>
      <td>3.8</td>
      <td>00:35</td>
      <td>5.4</td>
      <td>10.5</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2019-12-31 22:20:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>31/12/2019 22:20</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>81.0</td>
      <td>7.4</td>
      <td>7.6</td>
      <td>7.3</td>
      <td>222.0</td>
      <td>255.0</td>
      <td>0.5</td>
      <td>0.9</td>
      <td>1.0</td>
      <td>22:11</td>
      <td>1.0</td>
      <td>47.9</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-12-31 22:30:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>31/12/2019 22:30</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>83.0</td>
      <td>7.3</td>
      <td>7.4</td>
      <td>7.3</td>
      <td>266.0</td>
      <td>259.0</td>
      <td>0.6</td>
      <td>0.8</td>
      <td>0.6</td>
      <td>22:28</td>
      <td>1.1</td>
      <td>22.8</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-12-31 22:40:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>31/12/2019 22:40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>83.0</td>
      <td>7.5</td>
      <td>7.6</td>
      <td>7.3</td>
      <td>331.0</td>
      <td>317.0</td>
      <td>0.5</td>
      <td>0.8</td>
      <td>0.6</td>
      <td>22:35</td>
      <td>1.0</td>
      <td>31.6</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-12-31 22:50:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>31/12/2019 22:50</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>83.0</td>
      <td>7.5</td>
      <td>7.6</td>
      <td>7.4</td>
      <td>312.0</td>
      <td>285.0</td>
      <td>0.6</td>
      <td>1.0</td>
      <td>0.6</td>
      <td>22:50</td>
      <td>1.4</td>
      <td>31.3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2019-12-31 23:00:00</th>
      <td>Jerusalem Givat Ram</td>
      <td>31/12/2019 23:00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>83.0</td>
      <td>7.6</td>
      <td>7.7</td>
      <td>7.4</td>
      <td>315.0</td>
      <td>321.0</td>
      <td>0.7</td>
      <td>1.0</td>
      <td>0.8</td>
      <td>22:54</td>
      <td>1.3</td>
      <td>23.5</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>52554 rows × 18 columns</p>
</div>
</div>
</div>
<p>With <code>resample</code> it’s easy to compute monthly averages. Resample by itself only divides the data into buckets (in this case monthly buckets), and waits for a further instruction. Here, the next instruction is <code>mean</code>.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>df_month <span class="op">=</span> df[<span class="st">'temperature'</span>].resample(<span class="st">'M'</span>).mean()</span>
<span id="cb3-2"><a href="#cb3-2"></a>df_month</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>date
2019-01-31     9.119937
2019-02-28     9.629812
2019-03-31    10.731571
2019-04-30    14.514329
2019-05-31    22.916894
2019-06-30    23.587361
2019-07-31    24.019403
2019-08-31    24.050822
2019-09-30    22.313287
2019-10-31    20.641868
2019-11-30    17.257153
2019-12-31    11.224131
Freq: M, Name: temperature, dtype: float64</code></pre>
</div>
</div>
<p>Instead of <code>M</code> for month, which other options do I have? The full list can be <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases" target="_blank">found here</a>, but the most commonly used are:</p>
<pre><code>M         month end frequency
MS        month start frequency
A         year end frequency
AS, YS    year start frequency
D         calendar day frequency
H         hourly frequency
T, min    minutely frequency
S         secondly frequency</code></pre>
<p>The results we got for the monthly means were given as a pandas series, not dataframe. Let’s correct this:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>df_month <span class="op">=</span> (df[<span class="st">'temperature'</span>].resample(<span class="st">'M'</span>)         <span class="co"># resample by month</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>                             .mean()                <span class="co"># take the mean</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>                             .to_frame(<span class="st">'mean temp'</span>) <span class="co"># make output a dafaframe</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>           )</span>
<span id="cb6-5"><a href="#cb6-5"></a>df_month</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>mean temp</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-31</th>
      <td>9.119937</td>
    </tr>
    <tr>
      <th>2019-02-28</th>
      <td>9.629812</td>
    </tr>
    <tr>
      <th>2019-03-31</th>
      <td>10.731571</td>
    </tr>
    <tr>
      <th>2019-04-30</th>
      <td>14.514329</td>
    </tr>
    <tr>
      <th>2019-05-31</th>
      <td>22.916894</td>
    </tr>
    <tr>
      <th>2019-06-30</th>
      <td>23.587361</td>
    </tr>
    <tr>
      <th>2019-07-31</th>
      <td>24.019403</td>
    </tr>
    <tr>
      <th>2019-08-31</th>
      <td>24.050822</td>
    </tr>
    <tr>
      <th>2019-09-30</th>
      <td>22.313287</td>
    </tr>
    <tr>
      <th>2019-10-31</th>
      <td>20.641868</td>
    </tr>
    <tr>
      <th>2019-11-30</th>
      <td>17.257153</td>
    </tr>
    <tr>
      <th>2019-12-31</th>
      <td>11.224131</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<section id="hot-tip" class="level5 unnumbered alert alert-info">
<h5 class="unnumbered anchored" data-anchor-id="hot-tip">hot tip</h5>
Sometimes, a line of code can get too long and messy. In the code above, we broke line for every step, which makes the process so much cleaner. We <strong>highly</strong> advise you to do the same. <strong>Attention:</strong> This trick works as long as all the elements are inside the same parenthesis.
</section>
<p>Now it’s time to plot!</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb7-2"><a href="#cb7-2"></a>ax.plot(df_month[<span class="st">'mean temp'</span>], color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a>ax.<span class="bu">set</span>(ylabel<span class="op">=</span><span class="st">'Temperature (°C)'</span>,</span>
<span id="cb7-4"><a href="#cb7-4"></a>       yticks<span class="op">=</span>np.arange(<span class="dv">5</span>,<span class="dv">35</span>,<span class="dv">5</span>),</span>
<span id="cb7-5"><a href="#cb7-5"></a>       title<span class="op">=</span><span class="st">"Jerusalem, 2019"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>[Text(0, 0.5, 'Temperature (°C)'),
 [&lt;matplotlib.axis.YTick at 0x7faf784c6d60&gt;,
  &lt;matplotlib.axis.YTick at 0x7faf7843a220&gt;,
  &lt;matplotlib.axis.YTick at 0x7faf784c62b0&gt;,
  &lt;matplotlib.axis.YTick at 0x7faf784f3400&gt;,
  &lt;matplotlib.axis.YTick at 0x7faf784f3760&gt;,
  &lt;matplotlib.axis.YTick at 0x7faf784fa5b0&gt;],
 Text(0.5, 1.0, 'Jerusalem, 2019')]</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="resampling_files/figure-html/cell-6-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>The dates in the horizontal axis are not great. An easy fix is to use the month numbers instead of dates. <!-- We will resample now using `MS`, which assigns the result to the first of the month (Month Start), and we will then add 14 more days to it (left offset), so that every point is assigned to the middle (15th) of the month.

# df_month = (df['temperature'].resample('MS',
#                                        loffset=pd.Timedelta(14, 'd'))
#                              .mean()
#                              .to_frame('mean temp')
#            )
# df_month

--></p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb9-2"><a href="#cb9-2"></a>ax.plot(df_month.index.month, df_month[<span class="st">'mean temp'</span>], color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a>ax.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">"month"</span>,</span>
<span id="cb9-4"><a href="#cb9-4"></a>       ylabel<span class="op">=</span><span class="st">'Temperature (°C)'</span>,</span>
<span id="cb9-5"><a href="#cb9-5"></a>       yticks<span class="op">=</span>np.arange(<span class="dv">5</span>,<span class="dv">35</span>,<span class="dv">5</span>),</span>
<span id="cb9-6"><a href="#cb9-6"></a>       title<span class="op">=</span><span class="st">"Jerusalem, 2019"</span>,)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="resampling_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="discussion-1" class="level5 unnumbered alert alert-info">
<h5 class="unnumbered anchored" data-anchor-id="discussion-1">discussion</h5>
<p>When you have datetime as the dataframe index, you don’t need to give the function <code>plot</code> two arguments, date and values. You can just tell <code>plot</code> to use the column you want, the function will take the dates by itself.</p>
<p><iconify-icon inline="" icon="fa:question-circle-o"></iconify-icon> What does this line mean?<br>
<code>df_month['mean temp'].index.month</code></p>
<p>Print on the screen the following, and see yourself what each thing is:</p>
<ul>
<li><code>df_month</code></li>
<li><code>df_month.index</code></li>
<li><code>df_month.index.month</code></li>
<li><code>df_month.index.day</code></li>
</ul>
</section>
<p>We’re done! Congratulations :)</p>
<p>Now we need to calculate the average minimum/maximum daily temperatures. We start by creating an empty dataframe.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>df_day <span class="op">=</span> pd.DataFrame()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now resample data by day (<code>D</code>), and take the min/max of each day.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>df_day[<span class="st">'min temp'</span>] <span class="op">=</span> df[<span class="st">'temperature'</span>].resample(<span class="st">'D'</span>).<span class="bu">min</span>()</span>
<span id="cb11-2"><a href="#cb11-2"></a>df_day[<span class="st">'max temp'</span>] <span class="op">=</span> df[<span class="st">'temperature'</span>].resample(<span class="st">'D'</span>).<span class="bu">max</span>()</span>
<span id="cb11-3"><a href="#cb11-3"></a>df_day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>min temp</th>
      <th>max temp</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01</th>
      <td>7.5</td>
      <td>14.1</td>
    </tr>
    <tr>
      <th>2019-01-02</th>
      <td>6.6</td>
      <td>11.5</td>
    </tr>
    <tr>
      <th>2019-01-03</th>
      <td>6.3</td>
      <td>10.7</td>
    </tr>
    <tr>
      <th>2019-01-04</th>
      <td>6.6</td>
      <td>14.6</td>
    </tr>
    <tr>
      <th>2019-01-05</th>
      <td>7.0</td>
      <td>11.4</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2019-12-27</th>
      <td>4.4</td>
      <td>7.4</td>
    </tr>
    <tr>
      <th>2019-12-28</th>
      <td>6.6</td>
      <td>10.3</td>
    </tr>
    <tr>
      <th>2019-12-29</th>
      <td>8.1</td>
      <td>12.5</td>
    </tr>
    <tr>
      <th>2019-12-30</th>
      <td>6.9</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>2019-12-31</th>
      <td>5.2</td>
      <td>13.3</td>
    </tr>
  </tbody>
</table>
<p>365 rows × 2 columns</p>
</div>
</div>
</div>
<p>The next step is to calculate the average minimum/maximum for each month. This is similar to what we did above.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>df_month[<span class="st">'min temp'</span>] <span class="op">=</span> df_day[<span class="st">'min temp'</span>].resample(<span class="st">'M'</span>).mean()</span>
<span id="cb12-2"><a href="#cb12-2"></a>df_month[<span class="st">'max temp'</span>] <span class="op">=</span> df_day[<span class="st">'max temp'</span>].resample(<span class="st">'M'</span>).mean()</span>
<span id="cb12-3"><a href="#cb12-3"></a>df_month</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>mean temp</th>
      <th>min temp</th>
      <th>max temp</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-31</th>
      <td>9.119937</td>
      <td>5.922581</td>
      <td>12.470968</td>
    </tr>
    <tr>
      <th>2019-02-28</th>
      <td>9.629812</td>
      <td>6.825000</td>
      <td>13.089286</td>
    </tr>
    <tr>
      <th>2019-03-31</th>
      <td>10.731571</td>
      <td>7.532258</td>
      <td>14.661290</td>
    </tr>
    <tr>
      <th>2019-04-30</th>
      <td>14.514329</td>
      <td>10.866667</td>
      <td>19.113333</td>
    </tr>
    <tr>
      <th>2019-05-31</th>
      <td>22.916894</td>
      <td>17.296774</td>
      <td>29.038710</td>
    </tr>
    <tr>
      <th>2019-06-30</th>
      <td>23.587361</td>
      <td>19.163333</td>
      <td>28.860000</td>
    </tr>
    <tr>
      <th>2019-07-31</th>
      <td>24.019403</td>
      <td>19.367742</td>
      <td>29.564516</td>
    </tr>
    <tr>
      <th>2019-08-31</th>
      <td>24.050822</td>
      <td>19.903226</td>
      <td>29.767742</td>
    </tr>
    <tr>
      <th>2019-09-30</th>
      <td>22.313287</td>
      <td>18.430000</td>
      <td>28.456667</td>
    </tr>
    <tr>
      <th>2019-10-31</th>
      <td>20.641868</td>
      <td>16.945161</td>
      <td>26.190323</td>
    </tr>
    <tr>
      <th>2019-11-30</th>
      <td>17.257153</td>
      <td>14.066667</td>
      <td>21.436667</td>
    </tr>
    <tr>
      <th>2019-12-31</th>
      <td>11.224131</td>
      <td>8.806452</td>
      <td>14.448387</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Let’s plot…</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb13-2"><a href="#cb13-2"></a>ax.plot(df_month[<span class="st">'max temp'</span>], color<span class="op">=</span><span class="st">'tab:red'</span>, label<span class="op">=</span><span class="st">'max'</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a>ax.plot(df_month[<span class="st">'mean temp'</span>], color<span class="op">=</span><span class="st">'black'</span>, label<span class="op">=</span><span class="st">'mean'</span>)</span>
<span id="cb13-4"><a href="#cb13-4"></a>ax.plot(df_month[<span class="st">'min temp'</span>], color<span class="op">=</span><span class="st">'tab:blue'</span>, label<span class="op">=</span><span class="st">'min'</span>)</span>
<span id="cb13-5"><a href="#cb13-5"></a>ax.<span class="bu">set</span>(ylabel<span class="op">=</span><span class="st">'Temperature (°C)'</span>,</span>
<span id="cb13-6"><a href="#cb13-6"></a>       yticks<span class="op">=</span>np.arange(<span class="dv">10</span>,<span class="dv">35</span>,<span class="dv">5</span>),</span>
<span id="cb13-7"><a href="#cb13-7"></a>       title<span class="op">=</span><span class="st">"Jerusalem, 2019"</span>)</span>
<span id="cb13-8"><a href="#cb13-8"></a>ax.xaxis.set_major_locator(mdates.MonthLocator(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">13</span>, <span class="dv">2</span>), bymonthday<span class="op">=</span><span class="dv">15</span>))</span>
<span id="cb13-9"><a href="#cb13-9"></a>date_form <span class="op">=</span> DateFormatter(<span class="st">"%b"</span>)</span>
<span id="cb13-10"><a href="#cb13-10"></a>ax.xaxis.set_major_formatter(date_form)</span>
<span id="cb13-11"><a href="#cb13-11"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">12</span>, frameon<span class="op">=</span><span class="va">False</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="resampling_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Voilà! You made a beautiful graph!</p>
<section id="discussion-2" class="level5 unnumbered alert alert-info">
<h5 class="unnumbered anchored" data-anchor-id="discussion-2">discussion</h5>
<p>This time we did not put month numbers in the horizontal axis, we now have month names. How did we do this black magic, you ask? See lines 8–10 above. Matplotlib gives you absolute power over what to put in the axis, if you can only know how to tell it to… Wanna know more? <a href="../best-practices/date-formatting.html">Click here.</a></p>
</section>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../resampling/motivation.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">motivation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../resampling/upsampling.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">upsampling</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>